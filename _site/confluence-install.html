<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">
<title>Confluence Install Guide | Alan Bowman Portfolio</title>
<link rel="stylesheet" href="css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://localhost:4005feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Alan Bowman + Technical Writer</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                
                
                <li><a href="contact_info.html">Contact</a></li>
                
                
                
                <li><a href="resume.html">Resume</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Portfolio<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="portfolio.html">Portfolio Overview</a></li>
                        
                        
                        
                        <li><a href="uses-this-api.html">Uses This API</a></li>
                        
                        
                        
                        <li><a href="viewdns-api.html">ViewDNS API</a></li>
                        
                        
                        
                        <li class="dropdownActive"><a href="confluence-install.html">Confluence Install Guide</a></li>
                        
                        
                        
                        <li><a href="sphinx_install.html">Sphinx Install Guide</a></li>
                        
                        
                        
                        <li><a href="personas.html">User Personas</a></li>
                        
                        
                        
                        <li><a href="doc_design.html">Document Design - Basic Principles</a></li>
                        
                        
                        
                        <li><a href="styleguide-wordlist.html">Style Guide and Word List</a></li>
                        
                        
                        
                        <li><a href="how_work.html">How I Work</a></li>
                        
                        
                    </ul>
                </li>
                
                
                
			<li><a class="email" title="E-mail me" href="#" onclick="javascript:window.location='mailto:alanbowman@gmail.com?subject=Portfolio Questions feedback&body=I would like to discuss your portfolio: ' + window.location.href;"><i class="fa fa-envelope-o"></i> E-mail Me</a><li>

		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Confluence Install Guide">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
    <div class="col-lg-12">&nbsp;</div>
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <div class="col-md-3">

          












<ul id="mysidebar" class="nav">
    <li class="sidebarTitle"> </li>
    
    
    
        
    
    <li>
        <a href="#">Overview</a>
        <ul>
            
            
            
            <li><a href="index.html">About Me</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Portfolio</a>
        <ul>
            
            
            
            <li><a href="portfolio.html">Portfolio Overview</a></li>
            
            
            
            
            
            
            <li><a href="uses-this-api.html">Uses This API</a></li>
            
            
            
            
            
            
            <li><a href="viewdns-api.html">ViewDNS API</a></li>
            
            
            
            
            
            
            <li class="active"><a href="confluence-install.html">Confluence Install Guide</a></li>
            
            
            
            
            
            
            <li><a href="sphinx_install.html">Sphinx Install Guide</a></li>
            
            
            
            
            
            
            <li><a href="personas.html">User Personas</a></li>
            
            
            
            
            
            
            <li><a href="doc_design.html">Document Design - Basic Principles</a></li>
            
            
            
            
            
            
            <li><a href="styleguide-wordlist.html">Style Guide and Word List</a></li>
            
            
            
            
            
            
            <li><a href="how_work.html">How I Work</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Resume</a>
        <ul>
            
            
            
            <li><a href="resume.html">Resume</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Contact</a>
        <ul>
            
            
            
            <li><a href="contact_info.html">Contact Information</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Colophon</a>
        <ul>
            
            
            
            <li><a href="colophon.html">Colophon</a></li>
            
            
            
            
        </ul>
        
        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
    </li>
</ul>
</div>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

    <!-- Content Column -->
    <div class="col-md-9">
        <div class="post-header">
   <h1 class="post-title-main">Confluence Install Guide</h1>
</div>



<div class="post-content">

   

    

    

    

    

  <p>This install guide was written for someone with mid-level Linux system administration skills who is familiar with installing software from the command line. This covers a basic install of Confluence on a single server, and does not cover clustering, database replication and failover, or any type of high availability.</p>

<hr />

<h1 id="confluence-install-guide">Confluence Install Guide</h1>

<h3 id="overview">Overview</h3>

<p>This user guide will explain how to install Atlassian Confluence Enterprise Wiki software on your Virtual Server.</p>

<p>This guide assumes that you are able to connect to the command line of the server using an SSH client, work as the <em>root</em> user, and are able to
navigate the Linux file system, install and configure software, and edit files using a text editor.</p>

<p><strong>NOTE</strong> - this install guide uses the <a href="http://www.vim.org/" title="Vim">Vim</a> text editor for all file configuration examples. If you are unfamiliar
with Vim, the end of this document has a <a href="#addendum---a-very-short-vim-tutorial">quick tutorial on using Vim</a> that should cover the basics of using the editor.</p>

<h3 id="prerequisites">Prerequisites</h3>

<p>Before the installation process can begin, you will need the following:</p>

<ul>
  <li>A Virtual Server built with the latest version of CentOS Linux - choose a minimal server install if possible</li>
  <li>1.5 GB of RAM at a minimum</li>
  <li>25 GB of disk space at a minimum</li>
  <li>1 public IP address at a minimum</li>
</ul>

<p>You will also need:</p>

<ul>
  <li>A <strong>My Atlassian</strong> account - <a href="https://my.atlassian.com/">https://my.atlassian.com/</a></li>
  <li>A valid Confluence license for the correct number of users (purchased from your My Atlassian account)</li>
</ul>

<p><a href="#server-preparation">Server Preparation</a><br />
     <a href="#additional-software-installation">Additional Software Installation</a><br />
     <a href="#set-the-mysql-root-password">Set the MySQL root password</a></p>

<p><a href="#installing-confluence">Installing Confluence</a><br />
     <a href="#download-the-confluence-installer-from-atlassian">Download the Confluence installer from Atlassian</a><br />
     <a href="#set-the-installer-as-an-executable">Set the installer as an executable</a><br />
     <a href="#run-the-installer---follow-the-prompts">Run the installer - follow the prompts</a><br />
     <a href="#set-up-the-mysql-database-for-confluence">Set up the MySQL database for Confluence</a><br />
     <a href="#move-to-the-browser-based-installer-this-is-where-you-install-the-license">Move to the browser-based installer (this is where you install the license)</a></p>

<p><a href="#addendum---a-very-short-vim-tutorial">Addendum: A Very Short Vim Tutorial</a></p>

<hr />

<h2 id="server-preparation">Server Preparation</h2>

<p>Confluence is a Java application that uses the Tomcat application server to serve dynamic content. The Confluence install binary contains a JVM
(Java) and Tomcat, so <strong>DO NOT</strong> install those before installing Confluence. Having Java and Tomcat installed before installing
Confluence will cause port conflicts and various other problems that can be difficult to troubleshoot.</p>

<h3 id="additional-software-installation">Additional Software Installation</h3>

<p>Once the server has been provisioned and built, you will need to install some additional software before you can install Confluence. Software is
installed from the command line as the <em>root</em> user, using the <em>yum</em> package manager. You will need to install the following:</p>

<ul>
  <li>Sendmail (a mail server, used to send messages from Confluence)</li>
  <li><em>wget</em> (used to download Confluence)</li>
  <li>CentOS Development tools group (general tools)</li>
  <li>MySQL database server</li>
</ul>

<p>You will need to connect to the server using the Secure SHell (SSH), which encrypts the connection between your local computer and the
server. Once you are connected via SSH you will be at the command line of server.</p>

<p>The commands used are:</p>

<ul>
  <li><strong><code class="highlighter-rouge">yum update -y</code></strong> - this updates the <em>yum</em> application so that it is looking at the latest version of the repositories</li>
  <li><strong><code class="highlighter-rouge">yum install -y sendmail sendmail-cf sendmail-doc</code></strong> - <em>sendmail</em> is the mail server Confluence will use to send announcements</li>
  <li><strong><code class="highlighter-rouge">yum install -y wget</code></strong> - <em>wget</em> is the application that will be used to download Confluence</li>
  <li><strong><code class="highlighter-rouge">yum groupinstall -y "Development tools"</code></strong> - the Dev tools are a suite of applications needed to install and configure software</li>
  <li><strong><code class="highlighter-rouge">yum install -y mysql-server</code></strong> - MySQL is the database that will be used by Confluence</li>
</ul>

<p>At the command prompt, you will type in each command one at a time and hit Enter (or Return). Let each command complete - some of them will
take several minutes to finish. You will taken back to the command prompt once the command completes.</p>

<h3 id="set-the-mysql-root-password">Set the MySQL root password</h3>

<p>Once all the additional software is installed, you will need to set a MySQL <em>root</em> password. <strong>NOTE</strong> - this is not the same as the <em>root</em>
password for the system super-user! This is a password for the MySQL database <em>root</em> user.</p>

<p>This is done before installing Confluence so that the database server is secure during the time it takes to install Confluence and the time it
takes to actually set up the database itself.</p>

<p>Change directories to the <em>/root</em> directory, and create a file called <strong><em>.my.cnf</em></strong>. Note the dot (.) at the beginning of the file name.
Create the file using the <strong><code class="highlighter-rouge">touch</code></strong> command, and then edit it using a text editor (vim in this example).</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="o">[</span>root@example ~]# <span class="nb">cd</span> /root
<span class="o">[</span>root@example ~]# touch .my.cnf
<span class="o">[</span>root@example ~]# vim .my.cnf
</code></pre>
</div>

<p>Add this info to the <code class="highlighter-rouge">.my.cnf</code> file, and save and exit.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="o">[</span>client]
<span class="nv">password</span><span class="o">=</span>use_a_strong_passwd
</code></pre>
</div>

<p>Choose a strong password, preferably using a password generator. Several are available online, such as the <a href="https://strongpasswordgenerator.com/" title="Strong Password Generator">Strong Password
Generator</a>.  If the MySQL <em>root</em> password is easy to guess, a hacker could compromise
your database and access all the information in it.</p>

<p>This ends the server preparation. The next step is to install Confluence.</p>

<hr />

<h2 id="installing-confluence">Installing Confluence</h2>

<p>The first part of the Confluence install is done from the command line of the server, as the <em>root</em> user. Once that is complete, you will move
to a browser to finish the last part of the configuration. After that you can begin using Confluence.</p>

<p>The steps to install Confluence are:</p>

<ol>
  <li>Download the Confluence installer from Atlassian</li>
  <li>Set the installer as an executable</li>
  <li>Run the installer - follow the prompts</li>
  <li>Set up the MySQL database for Confluence</li>
  <li>Move to the browser-based installer (this is where you install the license)</li>
  <li>Begin using Confluence</li>
</ol>

<h3 id="download-the-confluence-installer-from-atlassian">Download the Confluence installer from Atlassian</h3>

<p>The Confluence installers are here: <a href="https://www.atlassian.com/software/confluence/download" title="Confluence Installers">Confluence installers</a>.
The page will default to the OS of the computer you use, so make sure to select <strong>Linux 64 Bit</strong> from the drop down menu. This will default to
the most current version of the installer.</p>

<p>However, instead of downloading the software from this page, right-click on the <strong>Download</strong> button, and select the option that allows you to
<em>Copy Link Address</em> (the wording may vary depending on your browser).  You do not need to save or open the link, just copy the link address.</p>

<p>Connect to the server using SSH, and as the <em>root</em> user change directories to the <em>/tmp</em> directory (note the leading slash). Then use
the <strong><code class="highlighter-rouge">wget</code></strong> command to download the installer. You should be able to type in <strong><code class="highlighter-rouge">wget</code></strong>, a space, and then paste the link address into the
command prompt.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="o">[</span>root@example ~]# <span class="nb">cd</span> /tmp
<span class="o">[</span>root@example ~]# wget https://www.atlassian.com/software/confluence/downloads/binary/atlassian-confluence-X.X-x64.bin
</code></pre>
</div>
<p>This will download the Confluence installer to your server. Depending on your connection speed, network traffic, etc., this may take a few
minutes. When the download is complete you will be returned to the command prompt.</p>

<h3 id="set-the-installer-as-an-executable">Set the installer as an executable</h3>

<p>By default, the Confluence installer is not executable, meaning you cannot run the installer program. This is by design, and done for
security reasons. You will need to set the installer to executable with the <strong><code class="highlighter-rouge">chmod +x atlassian-confluence-X.X-x64.bin</code></strong> command. Remember to
substitute <code class="highlighter-rouge">X.X</code> with the version number of the installer you downloaded.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="o">[</span>root@example ~]# chmod +x atlassian-confluence-X.X-x64.bin
</code></pre>
</div>

<h3 id="run-the-installer---follow-the-prompts">Run the installer - follow the prompts</h3>

<p>Once the installer has been set to executable, you can run the installer program, and follow the prompts to install Confluence. Generally
speaking you can just accept the defaults for each choice.</p>

<p>Start the install process with the <strong><code class="highlighter-rouge">./atlassian-confluence-X.X-x64.bin</code></strong> command. The command is:
<code class="highlighter-rouge">dot slash atlassian-confluence-X.X-x64.bin</code> (all together, no spaces).  After you have entered that command, press ENTER (or RETURN).</p>

<p>This is an example of what you will see during the install process.  What’s inside the angle brackets is what you’ll type at the prompt
whenever the system asks you for an action. For example, &lt; o, Enter &gt; means to press the letter o and then press Enter.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="o">[</span>root@example ~]# ./atlassian-confluence-X.X-x64.bin
Unpacking JRE ...
Starting Installer ...


This will install Confluence X.X on your computer.
OK <span class="o">[</span>o, Enter], Cancel <span class="o">[</span>c]
&lt; o, Enter &gt;

Choose the appropriate installation or upgrade option.
Please choose one of the following:
Express Install <span class="o">(</span>uses default settings<span class="o">)</span> <span class="o">[</span>1], Custom Install <span class="o">(</span>recommended <span class="k">for </span>advanced users<span class="o">)</span> <span class="o">[</span>2, Enter], Upgrade an existing Confluence installation <span class="o">[</span>3]
&lt; 2, Enter &gt;

Where should Confluence X.X be installed?
<span class="o">[</span>/opt/atlassian/confluence]
&lt; Enter &gt;

Default location <span class="k">for </span>Confluence data
<span class="o">[</span>/var/atlassian/application-data/confluence]
&lt; Enter &gt;

Configure which ports Confluence will use.
Confluence requires two TCP ports that are not being used by any other applications on this machine. The HTTP port is where you will access
Confluence through your browser. The Control port is used to Startup and Shutdown Confluence.
Use default ports <span class="o">(</span>HTTP: 8090, Control: 8000<span class="o">)</span> - Recommended <span class="o">[</span>1, Enter], Set custom value <span class="k">for </span>HTTP and Control ports <span class="o">[</span>2]
&lt; 1, Enter &gt;

Confluence can be run <span class="k">in </span>the background.
You may choose to run Confluence as a service, which means it will start automatically whenever the computer restarts.
Install Confluence as Service?
Yes <span class="o">[</span>y, Enter], No <span class="o">[</span>n]
&lt; y, Enter &gt;

Extracting files ...



Please <span class="nb">wait </span>a few moments <span class="k">while </span>Confluence starts up.
Launching Confluence ...
Installation of Confluence X.X is <span class="nb">complete
</span>Your installation of Confluence X.X is now ready and can be accessed via your browser.
Confluence X.X can be accessed at http://localhost:8090
Finishing installation ...
<span class="o">[</span>root@example tmp]#
</code></pre>
</div>

<p>After the install completes, you will need to move on to the MySQL database configuration before finishing the rest of the Confluence setup
from the browser.</p>

<h3 id="set-up-the-mysql-database-for-confluence">Set up the MySQL database for Confluence</h3>

<p>In this section you will start the MySQL database server, secure it, and create the database that Confluence will use. You will also add some
settings to the file that controls some of the variables that MySQL uses.</p>

<p>You will need the MySQL <em>root</em> password that you set in the <a href="#set-the-mysql-root-password">Set the MySQL root password</a> section, and you will
also need to create a database password for the Confluence database. You will want that password to be as secure as the MySQL <em>root</em> password so
you will again want to use a <a href="https://strongpasswordgenerator.com/" title="Strong Password Generator">Strong Password Generator</a>
for this.</p>

<p>Start the MySQL database server with the <strong><code class="highlighter-rouge">service mysqld start</code></strong> command. Note the <strong>d</strong> at the end - <strong>mysqld</strong>.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="o">[</span>root@example ~]# service mysqld start
</code></pre>
</div>

<p>If this is the first time that the MySQL database server has run, there will be a lot of output generated on the screen. Wait until you are
returned to the command prompt, and then run the following command to secure the MySQL server: <strong><code class="highlighter-rouge">/usr/bin/mysql_secure_installation</code></strong></p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="o">[</span>root@example ~]# /usr/bin/mysql_secure_installation
</code></pre>
</div>

<p>You will be asked for the current MySQL <em>root</em> password - enter it when prompted. If you’re asked to set the MySQL <em>root</em> password again, select
<strong>n</strong> for no. As part of the process to secure the database, you will see the following prompts:</p>

<ul>
  <li><strong>Remove anonymous users?</strong> - select <strong>y</strong></li>
  <li><strong>Disallow root login remotely?</strong> - select <strong>y</strong></li>
  <li><strong>Remove test database and access to it?</strong> - select <strong>y</strong></li>
  <li><strong>Reload privilege tables now?</strong> - select <strong>y</strong></li>
</ul>

<p>This will drop you back to the command prompt once the tables are reloaded.</p>

<p>The next step is to create the actual database that Confluence will use.  This involves creating the database, the database user, and the database
user password. As always, make sure to use a secure password for the database user. All of this is done from the command prompt of the MySQL
server.</p>

<p>The commands you will need to use are as follows. An example of how this will look is also below. By convention, MySQL commands are always shown
in UPPERCASE. However, you do not actually need to use uppercase letters, the commands are not case-sensitive. Also, all MySQL commands
end with a semi-colon (;).</p>

<ul>
  <li><strong><code class="highlighter-rouge">mysql -u root -p</code></strong> - this logs you in to the MySQL database server as the MySQL <em>root</em> user. You will be prompted for the MySQL
<em>root</em> password.</li>
  <li><strong><code class="highlighter-rouge">CREATE DATABASE confluence CHARACTER SET utf8 COLLATE utf8_bin;</code></strong> - this creates the actual database, called <em>confluence</em></li>
  <li><strong><code class="highlighter-rouge">GRANT ALL PRIVILEGES ON confluence.* TO 'confluence_db_user'@'localhost' IDENTIFIED BY 'secure_password';</code></strong> - this creates the database user and sets the password for that user. Choose a database user name that you will remember and as always use a secure password.</li>
</ul>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="o">[</span>root@example ~]# mysql -u root -p
Enter password:

Welcome to the MySQL monitor. Commands end with ; or <span class="se">\g</span>.
Your MySQL connection id is 11
Server version: 5.0.95 Source distribution

Copyright <span class="o">(</span>c<span class="o">)</span> 2000, 2011, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective owners.

Type <span class="s1">'help;'</span> or <span class="s1">'\h'</span> <span class="k">for </span>help. Type <span class="s1">'\c'</span> to clear the current input statement.

<span class="gp">mysql&gt; </span>CREATE DATABASE confluence CHARACTER SET utf8 COLLATE utf8_bin;
<span class="gp">mysql&gt; </span>GRANT ALL PRIVILEGES ON confluence.<span class="k">*</span> TO <span class="s1">'confluence_db_user'</span>@<span class="s1">'localhost'</span> IDENTIFIED BY <span class="s1">'secure_password'</span>;
<span class="gp">mysql&gt; </span>quit;
<span class="o">[</span>root@example ~]#
</code></pre>
</div>

<p>After you have created the database and database user / password, you will need to edit the file that controls some settings for MySQL. The
file is located at <em>/etc/my.cnf</em>. Note the dot between my and cnf.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="o">[</span>root@example ~]# <span class="nb">cd</span> /etc
<span class="o">[</span>root@example ~]# vim my.cnf
</code></pre>
</div>

<p>The <em>my.cnf</em> file is divided into sections. Add the following to the <code class="highlighter-rouge">[mysqld]</code> section:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>character-set-server<span class="o">=</span>utf8
collation-server<span class="o">=</span>utf8_bin
default-storage-engine<span class="o">=</span>INNODB
<span class="nv">max_allowed_packet</span><span class="o">=</span>32M
</code></pre>
</div>

<p>Once you have made these changes, save and exit the file, and restart the MySQL database server with the <strong><em><code class="highlighter-rouge">service mysqld restart</code></em></strong> command.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="o">[</span>root@example ~]# service mysqld restart
</code></pre>
</div>

<p>This ends the command line install part of Confluence. The rest of the install process takes place in the browser.</p>

<h3 id="move-to-the-browser-based-installer-this-is-where-you-install-the-license">Move to the browser-based installer (this is where you install the license)</h3>

<p>The last part of the Confluence install takes place in the browser. Open a browser, and go to <strong><em>http://IP_ADDRESS:8090</em></strong>, where IP_ADDRESS is
the IP address of your server. If the browser will not open the page, the connection is usually being blocked by some kind of firewall application.</p>

<p>From the first page that opens, you will need to copy the <strong>Server ID</strong>, which is just above the box where you enter the License Key. Take the
Server ID, and go to your <strong>My Atlassian</strong> account. There will be a place there to generate the License Key by entering the Server ID.</p>

<p>The final steps to finalize the installation are as follows:</p>

<ol>
  <li>Choose a <strong>Production Installation</strong> - this allows you to use the MySQL database</li>
  <li>When prompted, choose MySQL in the <strong>Choose Database</strong> screen</li>
  <li>You will need to choose the <strong>JDBC</strong> option to connect the database to Confluence</li>
  <li>You will need to enter the Confluence database user and password when prompted</li>
</ol>

<p>This takes a few minutes to run. If there is a problem, it will error out almost immediately.</p>

<p>This should complete the Confluence installation.</p>

<hr />

<h2 id="addendum---a-very-short-vim-tutorial">Addendum - A Very Short Vim Tutorial</h2>

<p>Vim is a very complex and powerful text editor. However, you only need to use a very small set of commands in order to edit the files
referenced in this install guide. Basically, you need to know how to:</p>

<ol>
  <li>Open a file for editing</li>
  <li>Move to a location in the file</li>
  <li>Add text to the file</li>
  <li>Save and exit the file</li>
</ol>

<h3 id="open-a-file-for-editing">1. Open a file for editing</h3>

<p>To open a file for editing, use the <strong><code class="highlighter-rouge">vim name_of_file</code></strong> command from the command prompt. For example, to open the <strong><code class="highlighter-rouge">.my.cnf</code></strong> file:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>vim .my.cnf
</code></pre>
</div>

<h3 id="move-to-a-location-in-the-file">2. Move to a location in the file</h3>

<p>If the file you’re editing has text in it already, you can navigate to the location where you need to enter your text using the arrow keys.
However, Vim is a modal editor, and you have to be in command mode to move around. So before you use the arrow keys, hit the <strong><code class="highlighter-rouge">Esc</code></strong>
(Escape) key twice. The <code class="highlighter-rouge">Esc</code> key will always take you out of insert mode and back to command mode. After hitting the <code class="highlighter-rouge">Esc</code> key twice, use
the up/down/left/right arrow keys as needed to move you to your desired location.</p>

<h3 id="add-text-to-the-file">3. Add text to the file</h3>

<p>Once the cursor is where you want it to be, you need to enter insert mode to add your text. Press the lower-case <strong>i</strong> key. This will allow
you to type in the text you need to add. Using the Return or Enter key will create a new line if needed.</p>

<p><strong>TIP</strong> - if you make a mistake, hit the <code class="highlighter-rouge">Esc</code> key twice, and then use the lower-case <strong>x</strong> key to erase what you’ve typed, and then use the
<strong>i</strong> key again to get back to insert mode.</p>

<h3 id="save-and-exit-the-file">4. Save and exit the file</h3>

<p>Once you’ve added your text or made your changes to the file you can save and exit. Hit the <code class="highlighter-rouge">Esc</code> key twice to get back to command mode, and
then type in <strong><code class="highlighter-rouge">:wq</code></strong>. That is a <code class="highlighter-rouge">colon w q</code> all together with no spaces. This will save and exit the file, and get you back to the
command prompt.</p>



    <div class="tags">
        
    </div>

    

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2017 Alan Bowman. All rights reserved. <br />
 Site last generated: Jun 20, 2017 <br />
<!-- <p><img src="images/company_logo.png" alt="Company logo"/></p> -->
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>

</body>

</html>