<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">
<title>Confluence Install Guide | Alan Bowman Portfolio</title>
<link rel="stylesheet" href="css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://localhost:4005feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Alan Bowman | Technical Writer</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                
                
                <li><a href="contact_info.html">Contact</a></li>
                
                
                
                <li><a href="resumes.html">Resume</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Portfolio<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="portfolio.html">Portfolio Overview</a></li>
                        
                        
                        
                        <li><a href="uses-this-api.html">Uses This API</a></li>
                        
                        
                        
                        <li><a href="viewdns-api.html">ViewDNS API</a></li>
                        
                        
                        
                        <li class="dropdownActive"><a href="confluence_install.html">Confluence Install Guide</a></li>
                        
                        
                        
                        <li><a href="sphinx_install.html">Sphinx Install Guide</a></li>
                        
                        
                        
                        <li><a href="personas.html">User Personas</a></li>
                        
                        
                        
                        <li><a href="styleguide-wordlist.html">Style Guide and Word List</a></li>
                        
                        
                        
                        <li><a href="how_work.html">How I work</a></li>
                        
                        
                    </ul>
                </li>
                
                
                
			<li><a class="email" title="E-mail me" href="#" onclick="javascript:window.location='mailto:alanbowman@gmail.com?subject=Portfolio Questions feedback&body=I would like to discuss your portfolio: ' + window.location.href;"><i class="fa fa-envelope-o"></i> E-mail Me</a><li>

		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Confluence Install Guide">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
    <div class="col-lg-12">&nbsp;</div>
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <div class="col-md-3">

          












<ul id="mysidebar" class="nav">
    <li class="sidebarTitle"> </li>
    
    
    
        
    
    <li>
        <a href="#">Overview</a>
        <ul>
            
            
            
            <li><a href="index.html">About Me</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Portfolio</a>
        <ul>
            
            
            
            <li><a href="portfolio.html">Portfolio Overview</a></li>
            
            
            
            
            
            
            <li><a href="uses-this-api.html">Uses This API</a></li>
            
            
            
            
            
            
            <li><a href="viewdns-api.html">ViewDNS API</a></li>
            
            
            
            
            
            
            <li class="active"><a href="confluence_install.html">Confluence Install Guide</a></li>
            
            
            
            
            
            
            <li><a href="sphinx_install.html">Sphinx Install Guide</a></li>
            
            
            
            
            
            
            <li><a href="personas.html">User Personas</a></li>
            
            
            
            
            
            
            <li><a href="styleguide-wordlist.html">Style Guide and Word List</a></li>
            
            
            
            
            
            
            <li><a href="how_work.html">How I work</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Resume</a>
        <ul>
            
            
            
            <li><a href="resume.html">Resume</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Contact</a>
        <ul>
            
            
            
            <li><a href="contact_info.html">Contact Information</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Colophon</a>
        <ul>
            
            
            
            <li><a href="colophon.html">Colophon</a></li>
            
            
            
            
        </ul>
        
        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
    </li>
</ul>
</div>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

    <!-- Content Column -->
    <div class="col-md-9">
        <div class="post-header">
   <h1 class="post-title-main">Confluence Install Guide</h1>
</div>



<div class="post-content">

   

    

    

    

    

  <p>This install guide was written for a fellow member of a mailing list for technical writers. They wanted to install and evaluate <a href="https://www.atlassian.com/software/confluence" title="Confluence">Confluence</a> for their user-facing documentation, but were having problems following the <a href="https://confluence.atlassian.com/conf57/installing-confluence-on-linux-701435875.html" title="Confluence Install docs">official documentation</a> and posted on the mailing list asking for help. I had installed Confluence numerous times when my then employer was also evaluating it, so I was able to provide an install guide based on my notes. <strong>Note</strong> - this install guide is based on Confluence 5.7, which was the most current version at the time.</p>

<p>I specifically wrote this for someone with only low to moderate skill with Linux and system administration, but tried to keep it high level enough to not get bogged down in the “why” and just concentrate on the “how.”</p>

<hr />

<h1 id="installing-confluence">Installing Confluence</h1>

<p>This document explains how to install Atlassian Confluence Enterprise Wiki software on a Linux server. This is based on my current install notes (for Confluence 5.7).</p>

<h3 id="prerequisites">Prerequisites</h3>

<p>Before the installation process can begin, you will need the following hardware:</p>

<ul>
  <li>Linux server running Red Hat Enterprise Linux (RHEL) or a RHEL clone such as CentOS Linux</li>
  <li>1.5 GB of RAM at a minimum</li>
  <li>25 GB of disk space at a minimum</li>
  <li>1 public IP address (Internet access is assumed)</li>
</ul>

<p>The server can be either a standalone physical server or a virtual server. My current Confluence instance runs on a virtual server.</p>

<p>You will also need:</p>

<ul>
  <li>root access to the server over SSH</li>
  <li>A My Atlassian account - https://my.atlassian.com/</li>
  <li>A valid Confluence license for the correct number of users (purchased from your My Atlassian account)</li>
</ul>

<p>This install guide assumes that you are able to connect to the command line of the server using an SSH client, work as the root user, and are able to navigate the Linux file system, install and configure software, and edit files using a text editor. I realize that you may not have all these skills, so I will try and explain as much as I can without getting bogged down into too much detail. I can answer any questions you may have about the specifics of certain commands if needed.</p>

<p><strong>NOTE</strong> - in this install guide I show examples of editing files using the <a href="http://www.vim.org/" title="Vim">Vim</a> text editor. Vim is a highly configurable text editor often used by programmers and system administrators. At the end of this document is a <a href="#addendum---a-very-short-vim-tutorial">quick tutorial on using Vim</a> that should cover most of what you need to do. If Vim is too complex (and it is a very complex piece of software), see if your server has <code class="highlighter-rouge">nano</code> or <code class="highlighter-rouge">pico</code> installed, which are more user-friendly.</p>

<p>You should be able to hand this install guide to someone with moderate to advanced Linux skills and they should be able to follow along with no issues.</p>

<p><a href="#server-preparation">Server Preparation</a><br />
    <a href="#additional-software-installation">Additional Software Installation</a><br />
    <a href="#set-the-mysql-root-password">Set the MySQL root password</a></p>

<p><a href="#installing-confluence-1">Installing Confluence</a><br />
    <a href="#download-the-confluence-installer-from-atlassian">Download the Confluence installer from Atlassian</a><br />
    <a href="#set-the-installer-as-an-executable">Set the installer as an executable</a><br />
    <a href="#run-the-installer---follow-the-prompts">Run the installer - follow the prompts</a><br />
    <a href="#set-up-the-mysql-database-for-confluence">Set up the MySQL database for Confluence</a><br />
    <a href="#move-to-the-browser-based-installer-this-is-where-you-install-the-license">Move to the browser-based installer (this is where you install the license)</a><br />
    <a href="#enjoy-using-confluence">Enjoy using Confluence</a></p>

<p><a href="#addendum---a-very-short-vim-tutorial">Addendum: A Very Short Vim Tutorial</a></p>

<hr />

<h2 id="server-preparation">Server Preparation</h2>

<p>Confluence is a Java application that uses the Tomcat application server to serve dynamic content. The Confluence install binary contains a JVM (Java) and Tomcat, so do not install those before installing Confluence. Having Java and Tomcat installed before installing Confluence will cause port conflicts and various other problems that can be difficult to troubleshoot.</p>

<p>Here are the details for my current server:</p>

<ul>
  <li>Server OS: CentOS Linux 6.5 (Final) x86_64 (CentOS is a RHEL clone)</li>
  <li>RAM: 1536 MB (1.5 GB)</li>
  <li>HDD: 25 GB</li>
</ul>

<p>When CentOS is installed, you are usually prompted to install certain packages or groups of packages. Try to pick a minimal install - you don’t need any games or desktop GUIs or office suites. You can install the Apache HTTP server, but I would not install MySQL at this part of the process.</p>

<p>Installing CentOS is far beyond the scope of this doc, but detailed instructions can be found here - <a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Installation_Guide/" title="RHEL Install Guide">RHEL Installation Guide</a>. Due to licensing issues, CentOS is no longer able to provide this document themselves, it has to come from the upstream source.</p>

<p>At my work we have a CentOS template available that is fairly bare-bones - no Apache, no databases, no PHP - and that is what I always start with.</p>

<h3 id="additional-software-installation">Additional Software Installation</h3>

<p>Once the server has been provisioned and built, you will need to install some additional software before you can install Confluence. Software is installed from the command line as the root user, using the yum package manager. You will need to install the following:</p>

<ul>
  <li>Sendmail (a mail server)</li>
  <li>wget (used to download Confluence)</li>
  <li>CentOS Development tools group (general tools)</li>
  <li>MySQL database server</li>
</ul>

<p>You will need to connect to the server using the Secure SHell (SSH), which encrypts the connection between your local computer and the server. Once you are connected via SSH you will be at the command line of server, which is similar to a DOS prompt but much more powerful.</p>

<p>The commands used are:</p>

<ul>
  <li><strong><code class="highlighter-rouge">yum update -y</code></strong> - this updates the yum application so that it is looking at the latest version of the repositories</li>
  <li><strong><code class="highlighter-rouge">yum install -y sendmail sendmail-cf sendmail-doc</code></strong> - sendmail is the mail server Confluence will use to send announcements</li>
  <li><strong><code class="highlighter-rouge">yum install -y wget</code></strong> - wget is the application that will be used to download Confluence</li>
  <li><strong><code class="highlighter-rouge">yum groupinstall -y "Development tools"</code></strong> - the Dev tools are a suite of applications needed to install and configure software</li>
  <li><strong><code class="highlighter-rouge">yum install -y mysql-server</code></strong> - MySQL is the database that will be used by Confluence</li>
</ul>

<p>At the command prompt, you will type in each command one at a time and hit Enter (or Return). Let each command complete - some of them will take several minutes to finish. You will taken back to the command prompt once the command completes.</p>

<h3 id="set-the-mysql-root-password">Set the MySQL root password</h3>

<p>Once all the additional software is installed, you will need to set a MySQL root password. <strong>NOTE</strong> - this is not the same as the root password for the system super-user! This is a password for the MySQL database root user.</p>

<p>This is done before installing Confluence so that the database server is secure during the time it takes to install Confluence and the time it takes to actually set up the database itself.</p>

<p>Change directories to the <em>/root</em> directory, and create a file called <strong><em>.my.cnf</em></strong>. Note the dot (.) at the beginning of the file name. Create the file using the <strong><code class="highlighter-rouge">touch</code></strong> command, and then edit it using a text editor (vim in this example).</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="o">[</span>root@example ~]# <span class="nb">cd</span> /root
<span class="o">[</span>root@example ~]# touch .my.cnf
<span class="o">[</span>root@example ~]# vim .my.cnf
</code></pre>
</div>

<p>Add this info to the .my.cnf file, and save and exit.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="o">[</span>client]
<span class="nv">password</span><span class="o">=</span>secure_password
</code></pre>
</div>

<p>Choose a strong password, preferably using a password generator. Several are available online, such as the <a href="https://strongpasswordgenerator.com/" title="Strong Password Generator">Strong Password Generator</a>. If the MySQL root password is easy to guess, a hacker could compromise your database and access all the information in it.</p>

<p>This ends the server preparation. The next step is to install Confluence.</p>

<hr />

<h2 id="installing-confluence-1">Installing Confluence</h2>

<p>The first part of the Confluence install is done from the command line of the server, as the root user. Once that is complete, you will move to a browser to finish the last part of the configuration. After that you can begin using Confluence.</p>

<p>The steps to install Confluence are:</p>

<ol>
  <li>Download the Confluence installer from Atlassian</li>
  <li>Set the installer as an executable</li>
  <li>Run the installer - follow the prompts</li>
  <li>Set up the MySQL database for Confluence</li>
  <li>Move to the browser-based installer (this is where you install the license)</li>
  <li>Enjoy using Confluence</li>
</ol>

<h3 id="download-the-confluence-installer-from-atlassian">Download the Confluence installer from Atlassian</h3>

<p>The Confluence installers are here: <a href="https://www.atlassian.com/software/confluence/download" title="Confluence Installers">Confluence installers</a>. The page will default to the OS you’re currently using, so make sure to select the Linux tab. What you’re going to want to do is get the link to the installer so that you can download it directly to the server where you’re installing Confluence. You could download the installer to your local computer and then upload it to the server, but that requires an unnecessary extra step.</p>

<p>I use the most current version of the Linux 64 bit installer, which is currently Confluence 5.7 Server - Linux Installer (64 bit). The version number will change, but unless you know for a fact that you’re using a 32 bit system, get the 64 bit installer.</p>

<p>Right-click on the Trial download button, and select the option that lets you <em>Copy Link Address</em> (the wording my vary depending on your browser). You don’t need to save the link address, or open, you just want to copy the link address.</p>

<p>Connect to the server using SSH, and as the root user change directories to the <em>/tmp</em> directory (note the leading slash). Then use the <strong><code class="highlighter-rouge">wget</code></strong> command to download the installer. You should be able to type in <strong><code class="highlighter-rouge">wget</code></strong>, a space, and then paste the link address into the command prompt.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="o">[</span>root@example ~]# <span class="nb">cd</span> /tmp
<span class="o">[</span>root@example ~]# wget https://www.atlassian.com/software/confluence/downloads/binary/atlassian-confluence-5.7-x64.bin
</code></pre>
</div>

<p>This example uses the URL of the current (2015-02-20) Confluence installer, the URL you use may be slightly different.</p>

<p>This will download the Confluence installer to your server. Depending on your connection speed, network traffic, etc, this may take a few minutes. You’ll know that the download is complete when you’re returned to the command prompt.</p>

<h3 id="set-the-installer-as-an-executable">Set the installer as an executable</h3>

<p>By default, the Confluence installer isn’t executable, meaning you cannot run the installer program. This is by design, and done for security reasons. You will need to set the installer to executable with the <strong><code class="highlighter-rouge">chmod +x atlassian-confluence-5.7-x64.bin</code></strong> command.</p>

<p><strong>NOTE</strong> - the intricacies of UNIX/Linux file permissions are too esoteric to get into here. This is a quick overview: <a href="https://www.tutorialspoint.com/unix/unix-file-permission.htm" title="Unix File Permissions">Unix - File Permissions</a>. If you’re really interested I’ll be glad to go into more detail, but the “how” is only relevant here, not the “why”.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="o">[</span>root@example ~]# chmod +x atlassian-confluence-5.7-x64.bin
</code></pre>
</div>

<h3 id="run-the-installer---follow-the-prompts">Run the installer - follow the prompts</h3>

<p>Once the installer has been set to executable, you can run the installer program, and follow the prompts to install Confluence. Generally speaking you can just accept the defaults for each choice. I’ve installed Confluence a dozen times or so, and I’ve never strayed from the defaults.</p>

<p>Start the install process with the <strong><code class="highlighter-rouge">./atlassian-confluence-5.7-x64.bin</code></strong> command. The command is: <code class="highlighter-rouge">dot slash atlassian-confluence-5.7-x64.bin</code> (all together, no spaces). After you have entered that command, press ENTER (or RETURN).</p>

<p>This is an example of what you will see during the install process. What’s inside the angle brackets and is what you’ll type at the prompt whenever the system asks you for an action. For example, &lt; o, Enter &gt; means to press the letter o and then press Enter.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="o">[</span>root@example ~]# ./atlassian-confluence-5.7-x64.bin
Unpacking JRE ...
Starting Installer ...

This will install Confluence 5.7 on your computer.
OK <span class="o">[</span>o, Enter], Cancel <span class="o">[</span>c]
&lt; o, Enter &gt;

Choose the appropriate installation or upgrade option.
Please choose one of the following:
Express Install <span class="o">(</span>uses default settings<span class="o">)</span> <span class="o">[</span>1], Custom Install <span class="o">(</span>recommended <span class="k">for </span>advanced users<span class="o">)</span> <span class="o">[</span>2, Enter], Upgrade an existing Confluence installation <span class="o">[</span>3]
&lt; 2, Enter &gt;

Where should Confluence 5.7 be installed?
<span class="o">[</span>/opt/atlassian/confluence]
&lt; Enter &gt;

Default location <span class="k">for </span>Confluence data
<span class="o">[</span>/var/atlassian/application-data/confluence]
&lt; Enter &gt;

Configure which ports Confluence will use.
Confluence requires two TCP ports that are not being used by any other
applications on this machine. The HTTP port is where you will access
Confluence through your browser. The Control port is used to Startup and
Shutdown Confluence.
Use default ports <span class="o">(</span>HTTP: 8090, Control: 8000<span class="o">)</span> - Recommended <span class="o">[</span>1, Enter], Set custom value <span class="k">for </span>HTTP and Control ports <span class="o">[</span>2]
&lt; 1, Enter &gt;

Confluence can be run <span class="k">in </span>the background.
You may choose to run Confluence as a service, which means it will start
automatically whenever the computer restarts.
Install Confluence as Service?
Yes <span class="o">[</span>y, Enter], No <span class="o">[</span>n]
&lt; y, Enter &gt;
Extracting files ...



Please <span class="nb">wait </span>a few moments <span class="k">while </span>Confluence starts up.
Launching Confluence ...
Installation of Confluence 5.7 is <span class="nb">complete
</span>Your installation of Confluence 5.7 is now ready and can be accessed via your browser.
Confluence 5.7 can be accessed at http://localhost:8090
Finishing installation ...
<span class="o">[</span>root@example tmp]#
</code></pre>
</div>

<p>After the install completes, you will need to move on to the MySQL database configuration before finishing the rest of the Confluence setup from the browser.</p>

<h3 id="set-up-the-mysql-database-for-confluence">Set up the MySQL database for Confluence</h3>

<p>In this section you will start the MySQL database server, secure it, and create the database that Confluence will use. You will also add some settings to the file that controls some of the variables that MySQL uses.</p>

<p>You will need the MySQL root password that you set in the <a href="#HREF TO ANCHOR">Set the MySQL root password</a> section, and you will also need to create a database password for the Confluence database. You will want that password to be as secure as the MySQL root password so you will again want to use a <a href="https://strongpasswordgenerator.com/" title="Strong Password Generator">Strong Password Generator</a> for this.</p>

<p>Start the MySQL database server with the <strong><code class="highlighter-rouge">service mysqld start</code></strong> command. Note the <strong>d</strong> at the end - <strong>mysqld</strong>.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="o">[</span>root@example ~]# service mysqld start
</code></pre>
</div>

<p>If this is the first time that the MySQL database server has run, there will be a lot of output generated on the screen. Wait until you are returned to the command prompt, and then run the following command to secure the MySQL server: <strong><code class="highlighter-rouge">/usr/bin/mysql_secure_installation</code></strong></p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="o">[</span>root@example ~]# /usr/bin/mysql_secure_installation
</code></pre>
</div>

<p>You will be asked for the current MySQL root password - enter it when prompted. If you’re asked to set the MySQL root password again, select <strong>n</strong> for no. As part of the process to secure the database, you will see the following prompts:</p>

<ul>
  <li><strong>Remove anonymous users?</strong> - select <strong>y</strong></li>
  <li><strong>Disallow root login remotely?</strong> - select <strong>y</strong></li>
  <li><strong>Remove test database and access to it?</strong> - select <strong>y</strong></li>
  <li><strong>Reload privilege tables now?</strong> - select <strong>y</strong></li>
</ul>

<p>This will drop you back to the command prompt once the tables are reloaded.</p>

<p>The next step is to create the actual database that Confluence will use. This involves creating the database, the database user, and the database user password. As always, make sure to use a secure password for the database user. All of this is done from the command prompt of the MySQL server.</p>

<p>The commands you will need to use are as follows. An example of how this will look is also below. By convention, MySQL commands are always shown in UPPERCASE. However, you do not actually need to use uppercase letters, the commands are not case-sensitive. Also, all MySQL commands end with a semi-colon.</p>

<ul>
  <li><strong><code class="highlighter-rouge">mysql -u root -p</code></strong> - this logs you in to the MySQL database server as the MySQL root user. You will be prompted for the MySQL root password.</li>
  <li><strong><code class="highlighter-rouge">CREATE DATABASE confluence CHARACTER SET utf8 COLLATE utf8_bin;</code></strong> - this creates the actual database, called confluence</li>
  <li><strong><code class="highlighter-rouge">GRANT ALL PRIVILEGES ON confluence.* TO 'confluence_db_user'@'localhost' IDENTIFIED BY 'secure_password';</code></strong> - this creates the database user and sets the password for that user. I tend to use something similar to confluence_db_user or sometimes conf_db_user.</li>
</ul>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="o">[</span>root@example ~]# mysql -u root -p
Enter password:

Welcome to the MySQL monitor. Commands end with ; or <span class="se">\g</span>.
Your MySQL connection id is 11
Server version: 5.0.95 Source distribution

Copyright <span class="o">(</span>c<span class="o">)</span> 2000, 2011, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type <span class="s1">'help;'</span> or <span class="s1">'\h'</span> <span class="k">for </span>help. Type <span class="s1">'\c'</span> to clear the current input statement.

<span class="gp">mysql&gt; </span>CREATE DATABASE confluence CHARACTER SET utf8 COLLATE utf8_bin;
<span class="gp">mysql&gt; </span>GRANT ALL PRIVILEGES ON confluence.<span class="k">*</span> TO <span class="s1">'confluence_db_user'</span>@<span class="s1">'localhost'</span> IDENTIFIED BY <span class="s1">'secure_password'</span>;
<span class="gp">mysql&gt; </span>quit;
<span class="o">[</span>root@example ~]#
</code></pre>
</div>

<p>After you have created the database and database user / password, you will need to edit the file that controls some settings for MySQL. The file is located at <em>/etc/my.cnf</em>. Note the dot between my and cnf.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="o">[</span>root@example ~]# <span class="nb">cd</span> /etc
<span class="o">[</span>root@example ~]# vim my.cnf
</code></pre>
</div>

<p>The <em>my.cnf</em> file is divided into sections. Add the following to the <code class="highlighter-rouge">[mysqld]</code> section:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>character-set-server=utf8
collation-server=utf8_bin
default-storage-engine=INNODB
max_allowed_packet=32M
</code></pre>
</div>

<p>Once you have made these changes, save and exit the file, and restart the MySQL database server with the service mysqld restart command.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="o">[</span>root@example ~]# service mysqld restart
</code></pre>
</div>
<p>This ends the command line install part of Confluence. The rest of the install process takes place in the browser.</p>

<h3 id="move-to-the-browser-based-installer-this-is-where-you-install-the-license">Move to the browser-based installer (this is where you install the license)</h3>

<p>(My notes here aren’t as detailed, because I’ve installed Confluence quite a few times and this part is pretty self-explanatory to me by now)</p>

<p>The last part of the Confluence install takes place in the browser. Open a browser, and go to <strong><em>http://IP_ADDRESS:8090</em></strong>, where IP_ADDRESS is the IP address of your server. If the browser won’t open the page, my experience is that the connection is being blocked by some kind of firewall application.</p>

<p>From the first page that opens, you will need to copy the Server ID, which is just above the box where you enter the License Key. Take the Server ID, and go to your <strong>My Atlassian</strong> account. There will be a place there to generate the License Key by entering the Server ID.</p>

<p>Here are the rest of the steps needed to finalize the installation:</p>

<ol>
  <li>Choose a <strong>Production Installation</strong> - this allows you to use the MySQL database</li>
  <li>When prompted, choose MySQL in the <strong>Choose Database</strong> screen</li>
  <li>You will need to choose the <strong>JDBC</strong> option to connect the database to Confluence</li>
  <li>You will need to enter the Confluence database user and password when prompted</li>
</ol>

<p>This takes a few minutes to run. If there is a problem, it will error out almost immediately.</p>

<p>This should complete the Confluence installation.</p>

<h3 id="enjoy-using-confluence">Enjoy using Confluence</h3>

<p>From this point onward you should be able to use Confluence.</p>

<p>If you need more in-depth information on how to use Confluence, there is one book I’ve heard good things about: <a href="https://www.packtpub.com/web-development/atlassian-confluence-5-essentials" title="Confluence Essentials">Atlassian Confluence 5 Essentials</a>.</p>

<p>The Atlassian Confluence docs are a bit hit and miss, and a bit disorganized (in my opinion). But they are the official source, and you should be able to find some answers there - <a href="https://confluence.atlassian.com/doc/confluence-documentation-home-135922.html" title="Confluence Documentation Home">Confluence Documentation Home</a>. Make sure that the doc you’re looking at matches the version of Confluence you have installed.</p>

<hr />

<h2 id="addendum---a-very-short-vim-tutorial">Addendum - A Very Short Vim Tutorial</h2>

<p>Vim is the successor to the <strong>vi</strong> editor, created in 1976 by Bill Joy (co-founder of Sun Microsystems). Vi comes from a world where all text input and editing was done from a green-screen serial terminal, and the concept of a mouse and a GUI had not yet been invented. Vim (Vi IMproved) was created in 1991 by Bram Moolenaar for the Amiga system, and has become more or less the “official” replacement to Vi.</p>

<p>Vim (and Vi) are modal editors, meaning that you enter commands in command mode, and enter text in insert mode. This can be quite confusing at first, and even after using Vim for almost 20 years I sometimes get tripped up by which mode I’m in. More than you ever wanted to know about Vim can be found here - <a href="http://vimdoc.sourceforge.net/htmldoc/usr_toc.html" title="Vim User Manual">Vim User Manual</a>.</p>

<p>However, you only need to use a very small set of commands in order to edit the files referenced in this install guide. Basically, you need to know how to:</p>

<ol>
  <li>Open a file for editing</li>
  <li>Move to a location in the file</li>
  <li>Add text to the file</li>
  <li>Save and exit the file</li>
</ol>

<h3 id="open-a-file-for-editing">1. Open a file for editing</h3>

<p>To open a file for editing, use the <strong><code class="highlighter-rouge">vim name_of_file</code></strong> command from the command prompt. For example, to open the <strong><code class="highlighter-rouge">.my.cnf</code></strong> file:</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>vim .my.cnf
</code></pre>
</div>

<h3 id="move-to-a-location-in-the-file">2. Move to a location in the file</h3>

<p>If the file you’re editing has text in it already, you can navigate to the location where you need to enter your text using the arrow keys. However, remember that Vim is a modal editor, and you have to be in command mode to move around. So before you use the arrow keys, hit the <strong><code class="highlighter-rouge">Esc</code></strong> (Escape) key twice. The Escape key will always take you out of insert mode and back to command mode. After hitting the Escape key twice, hit the up/down/left/right arrow keys as needed to move you to your desired location.</p>

<h3 id="add-text-to-the-file">3. Add text to the file</h3>

<p>Once the cursor is where you want it to be, you need to enter insert mode to add your text. Press the lower-case <strong>i</strong> key. This will allow you to type in the text you need to add. Using the Return or Enter key will create a new line if needed.</p>

<p><strong>TIP</strong> - if you make a mistake, hit the Escape key twice, and then use the lower-case <strong>x</strong> key to erase what you’ve typed, and then use the <strong>i</strong> key again to get back to insert mode.</p>

<h3 id="save-and-exit-the-file">4. Save and exit the file</h3>

<p>Once you’ve added your text or made your changes to the file you can save and exit. Hit the Escape key twice to get back to command mode, and then type in <strong><code class="highlighter-rouge">:wq</code></strong>. That’s a <code class="highlighter-rouge">colon w q</code> all together with no spaces. This will save and exit the file, and get you back to the command prompt.</p>

<p><br />
If you’re interested in learning how to use Vim, there is a built-in tutorial called <strong><code class="highlighter-rouge">vimtutor</code></strong> that you can access from the command line:</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="o">[</span>root@example ~]# vimtutor
</code></pre>
</div>
<p>If you work with Linux or UNIX systems on a regular basis, knowing Vim can be a huge benefit. Even just knowing some of the basics will make your life much easier.</p>



    <div class="tags">
        
    </div>

    

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2016 Alan Bowman. All rights reserved. <br />
 Site last generated: Oct 8, 2016 <br />
<!-- <p><img src="images/company_logo.png" alt="Company logo"/></p> -->
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>

</body>

</html>